<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Moonlit Guardian</title>

<link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@300;400&display=swap" rel="stylesheet">

<style>
body{
  margin:0;
  overflow:hidden;
  background:#0a0d16;
  font-family:'Cormorant Garamond', serif;
  color:#f5f2ec;
}

/* ===== 月光移动层 ===== */
.moonlight{
  position:absolute;
  width:200%;
  height:200%;
  background: radial-gradient(circle at 30% 30%, rgba(255,255,255,0.08), transparent 60%);
  animation: moonMove 25s linear infinite;
}

@keyframes moonMove{
  0%{ transform:translate(-20%,-20%); }
  50%{ transform:translate(-10%,-15%); }
  100%{ transform:translate(-20%,-20%); }
}

/* ===== 主容器（手机排版） ===== */
.container{
  position:relative;
  z-index:2;
  max-width:420px;
  margin:0 auto;
  height:100vh;
  display:flex;
  flex-direction:column;
  justify-content:center;
  align-items:center;
  padding:40px 28px;
  text-align:center;
  opacity:0;
  transition:opacity 2s ease;
}

/* 唤醒文字 */
#wakeup{
  position:absolute;
  width:100%;
  text-align:center;
  top:45%;
  letter-spacing:3px;
  font-size:16px;
  opacity:0;
  animation:wake 2s forwards;
}

@keyframes wake{
  0%{opacity:0;}
  30%{opacity:1;}
  100%{opacity:0;}
}

/* 守护语 */
.message{
  font-size:22px;
  line-height:1.7;
  letter-spacing:0.5px;
  margin-bottom:35px;
  text-shadow:0 0 20px rgba(255,255,255,0.2);
  animation:glow 6s ease-in-out infinite;
}

@keyframes glow{
  0%{text-shadow:0 0 10px rgba(255,255,255,0.15);}
  50%{text-shadow:0 0 25px rgba(255,255,255,0.35);}
  100%{text-shadow:0 0 10px rgba(255,255,255,0.15);}
}

/* 扫描统计 */
.counter{
  font-size:13px;
  opacity:0.5;
  letter-spacing:1px;
}

/* 兔子 */
.bunny{
  position:absolute;
  width:180px;
  bottom:12%;
  opacity:0;
  animation:fadeBunny 5s ease forwards;
  animation-delay:2s;
}

@keyframes fadeBunny{
  to{opacity:0.12;}
}

/* 梦网画布 */
canvas{
  position:absolute;
  top:0;
  left:0;
}
</style>
</head>

<body>

<div class="moonlight"></div>
<canvas id="dreamnet"></canvas>

<div id="wakeup">THE GUARDIAN AWAKENS</div>

<div class="container" id="content">
  <div class="message" id="guardian-text"></div>
  <div class="counter" id="scan-count"></div>
</div>

<!-- 更优雅兔子线条 -->
<svg class="bunny" viewBox="0 0 200 300">
  <path d="M100 260 Q85 210 95 160 
           Q75 115 85 60 
           Q100 30 115 60 
           Q125 115 105 160 
           Q115 210 100 260"
        stroke="white" stroke-width="1.5" fill="none"/>
</svg>

<script>

/* ===== 每日守护语 ===== */

const messages=[
"When you fall asleep tonight, I weave light between you and every shadow.",
"No nightmare may cross the quiet circle around your heart.",
"I remain awake in the moonlight so you may rest without fear.",
"The dark softens when it reaches you.",
"Dream gently. Anything heavy will dissolve before morning.",
"You are held in a woven field of quiet light.",
"Even unseen, I am guarding you.",
"The night bends around you, never against you.",
"Nothing unkind may stay.",
"Rest now. I am here."
];

const today=new Date().toDateString();
let storedDate=localStorage.getItem("guardianDate");
let storedMessage=localStorage.getItem("guardianMessage");

if(storedDate===today){
  document.getElementById("guardian-text").innerText=storedMessage;
}else{
  const random=messages[Math.floor(Math.random()*messages.length)];
  localStorage.setItem("guardianDate",today);
  localStorage.setItem("guardianMessage",random);
  document.getElementById("guardian-text").innerText=random;
}

/* ===== 扫描次数 ===== */

let count=localStorage.getItem("scanCount");
count=count?parseInt(count)+1:1;
localStorage.setItem("scanCount",count);

document.getElementById("scan-count").innerText=
"PROTECTED " + count + " TIMES";

/* ===== 2秒后显示主内容 ===== */

setTimeout(()=>{
  document.getElementById("content").style.opacity=1;
},2000);

/* ===== 梦网星线 ===== */

const canvas=document.getElementById("dreamnet");
const ctx=canvas.getContext("2d");

canvas.width=window.innerWidth;
canvas.height=window.innerHeight;

let stars=[];

for(let i=0;i<50;i++){
  stars.push({
    x:Math.random()*canvas.width,
    y:Math.random()*canvas.height,
    vx:(Math.random()-0.5)*0.15,
    vy:(Math.random()-0.5)*0.15
  });
}

function draw(){
  ctx.clearRect(0,0,canvas.width,canvas.height);

  stars.forEach(star=>{
    star.x+=star.vx;
    star.y+=star.vy;

    if(star.x<0||star.x>canvas.width)star.vx*=-1;
    if(star.y<0||star.y>canvas.height)star.vy*=-1;

    ctx.beginPath();
    ctx.arc(star.x,star.y,2,0,Math.PI*2);
    ctx.fillStyle="white";
    ctx.fill();
  });

  for(let i=0;i<stars.length;i++){
    for(let j=i+1;j<stars.length;j++){
      let dx=stars[i].x-stars[j].x;
      let dy=stars[i].y-stars[j].y;
      let dist=Math.sqrt(dx*dx+dy*dy);

      if(dist<110){
        ctx.strokeStyle="rgba(255,255,255,"+(1-dist/110)*0.12+")";
        ctx.beginPath();
        ctx.moveTo(stars[i].x,stars[i].y);
        ctx.lineTo(stars[j].x,stars[j].y);
        ctx.stroke();
      }
    }
  }

  requestAnimationFrame(draw);
}

draw();

</script>

</body>
</html>
